import"../chunks/CWj6FrbW.js";import{d as _e,o as we,s as X}from"../chunks/BVW34SQx.js";import{p as ye,c as Z,f as ee,a as d,b as ke,s as S,g as e,d as V,e as u,h as o,i as m,r as s,t as te,u as je}from"../chunks/CNfditUa.js";import{i as v}from"../chunks/GC4dxQQb.js";import{g as H,s as L,a as Ie}from"../chunks/BEFEBz6G.js";import{s as Se,a as Fe}from"../chunks/0rDqRz2G.js";import{p as Me,P as Pe,S as Ae}from"../chunks/Cty7KhZ4.js";import{g as N}from"../chunks/D7x77NIs.js";import{A as We,I as $e,a as Te}from"../chunks/CN7Dxjc9.js";var Ce=u('<div class="min-h-screen bg-gray-50 flex justify-center items-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div></div>'),Ue=u('<a class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"><svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Download Video</a>'),Be=(F,h)=>h("emotional"),ze=u('<button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700"><svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Generate Emotional Slideshow</button>'),Ve=u('<div class="flex items-center space-x-3"><!></div>'),He=(F,h)=>S(h,"images"),Le=(F,h)=>S(h,"slideshow"),Ne=u('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Images</h2> <!></div>'),Oe=u('<div class="bg-gray-50 rounded-lg p-6 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">Add audio first</h3> <p class="mt-1 text-sm text-gray-500">Please upload an audio file or provide a YouTube URL before adding images.</p></div>'),Re=u('<div class="space-y-8"><div><h2 class="text-lg font-medium text-gray-900 mb-4">Audio</h2> <!></div> <!></div>'),Ee=u('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No images uploaded</h3> <p class="mt-1 text-sm text-gray-500">Upload some images to preview the slideshow.</p></div>'),Ge=u('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex items-center"><a href="/" class="text-gray-500 hover:text-gray-700 mr-4" aria-label="Back to home"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a> <div class="flex items-center gap-3"><h1 class="text-2xl font-bold text-gray-900"> </h1> <span> </span></div></div> <!></div></div></header> <div class="bg-white border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><nav class="-mb-px flex space-x-8" aria-label="Tabs"><button>Images & Audio</button> <button>Preview Slideshow</button></nav></div></div> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></main></div>');function tt(F,h){ye(h,!0);const[ae,re]=Fe(),oe=()=>Se(Me,"$page",ae);let t=V(null),O=V(!0),_=V("images");const g=oe().params.id;async function M(){try{const a=await fetch(`${H()}/api/projects/${g}`);if(a.ok){if(S(t,await a.json(),!0),e(t).type!=="FWI-emotional"){N(`/project/${g}`);return}}else console.error("Project not found:",g),alert("Project not found. Redirecting to home page."),N("/")}catch(a){console.error("Failed to load project:",a),alert("Failed to load project. Redirecting to home page."),N("/")}finally{S(O,!1)}}function se(a){switch(a){case"FWI-main":return"FWI Main";case"FWI-emotional":return"FWI Emotional";case"Scavenger-Hunt":return"Scavenger Hunt";default:return"FWI Main"}}function ie(a){switch(a){case"FWI-main":return"bg-blue-100 text-blue-800";case"FWI-emotional":return"bg-purple-100 text-purple-800";case"Scavenger-Hunt":return"bg-green-100 text-green-800";default:return"bg-blue-100 text-blue-800"}}we(()=>{M();const a=window.location.hostname,p=new WebSocket(`ws://${a}:3000`);return p.onmessage=P=>{const w=JSON.parse(P.data);w.projectId===g&&S(t,{...e(t),...w},!0)},()=>{p.close()}});function R(){M()}function ne(){M()}async function le(a="emotional"){try{(await fetch(`${H()}/api/process/${g}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:a})})).ok&&(e(t).status="processing")}catch(p){console.error("Failed to start processing:",p)}}var E=Z(),de=ee(E);{var ce=a=>{var p=Ce();d(a,p)},ve=(a,p)=>{{var P=w=>{var A=Ge(),W=o(A),G=o(W),J=o(G),$=o(J),D=m(o($),2),T=o(D),pe=o(T,!0);s(T);var C=m(T,2),me=o(C,!0);s(C),s(D),s($);var ue=m($,2);{var ge=l=>{var n=Ve(),f=o(n);{var x=c=>{Pe(c,{get project(){return e(t)}})},y=(c,j)=>{{var I=r=>{var b=Ue();te(z=>Ie(b,"href",`${z??""}/api/process/${g??""}/download`),[H]),d(r,b)},i=r=>{var b=ze();b.__click=[Be,le],d(r,b)};v(c,r=>{e(t).video?r(I):r(i,!1)},j)}};v(f,c=>{e(t).status==="processing"?c(x):c(y,!1)})}s(n),d(l,n)};v(ue,l=>{var n;((n=e(t).images)==null?void 0:n.length)>0&&e(t).audio&&l(ge)})}s(J),s(G),s(W);var U=m(W,2),Y=o(U),q=o(Y),B=o(q);B.__click=[He,_];var K=m(B,2);K.__click=[Le,_],s(q),s(Y),s(U);var Q=m(U,2),he=o(Q);{var fe=l=>{var n=Re(),f=o(n),x=m(o(f),2);const y=je(()=>!!e(t).audio);We(x,{get projectId(){return g},get hasAudio(){return e(y)},get audioFile(){return e(t).audio},hideStartTime:!0,$$events:{uploaded:ne}}),s(f);var c=m(f,2);{var j=i=>{var r=Ne(),b=m(o(r),2);{var z=k=>{$e(k,{get projectId(){return g},$$events:{uploaded:R}})},be=k=>{Te(k,{get project(){return e(t)},$$events:{updated:M,"add-more":R}})};v(b,k=>{!e(t).images||e(t).images.length===0?k(z):k(be,!1)})}s(r),d(i,r)},I=i=>{var r=Oe();d(i,r)};v(c,i=>{e(t).audio?i(j):i(I,!1)})}s(n),d(l,n)},xe=(l,n)=>{{var f=x=>{var y=Z(),c=ee(y);{var j=i=>{Ae(i,{get project(){return e(t)}})},I=i=>{var r=Ee();d(i,r)};v(c,i=>{var r;((r=e(t).images)==null?void 0:r.length)>0?i(j):i(I,!1)})}d(x,y)};v(l,x=>{e(_)==="slideshow"&&x(f)},n)}};v(he,l=>{e(_)==="images"?l(fe):l(xe,!1)})}s(Q),s(A),te((l,n)=>{X(pe,e(t).name),L(C,1,`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${l??""}`),X(me,n),L(B,1,`py-4 px-1 border-b-2 font-medium text-sm ${e(_)==="images"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),L(K,1,`py-4 px-1 border-b-2 font-medium text-sm ${e(_)==="slideshow"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`)},[()=>ie(e(t).type),()=>se(e(t).type)]),d(w,A)};v(a,w=>{e(t)&&w(P)},p)}};v(de,a=>{e(O)?a(ce):a(ve,!1)})}d(F,E),ke(),re()}_e(["click"]);export{tt as component};
