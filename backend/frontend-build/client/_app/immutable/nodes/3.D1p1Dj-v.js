import"../chunks/CWj6FrbW.js";import{d as he,o as fe,s as K}from"../chunks/CZG4RayU.js";import{p as xe,c as Q,f as X,a as c,b as be,s as j,g as e,d as U,e as x,h as o,i as p,r as s,t as Y,u as _e}from"../chunks/CTg2jUt1.js";import{i as v}from"../chunks/dXEtNgE2.js";import{s as H,a as we}from"../chunks/BthX63rt.js";import{s as ye,a as ke}from"../chunks/5EVyXMsi.js";import{p as je,P as Ie,I as Fe,a as Se,S as Pe}from"../chunks/CtnZG19v.js";import{g as V}from"../chunks/DeFU6qEV.js";import{A as Me}from"../chunks/N0SjHj4z.js";var We=x('<div class="min-h-screen bg-gray-50 flex justify-center items-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div></div>'),Ae=x('<a class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"><svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Download Video</a>'),$e=(I,g)=>g("emotional"),Ce=x('<button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700"><svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Generate Emotional Slideshow</button>'),Te=x('<div class="flex items-center space-x-3"><!></div>'),Be=(I,g)=>j(g,"images"),Ue=(I,g)=>j(g,"slideshow"),He=x('<div class="space-y-8"><div><h2 class="text-lg font-medium text-gray-900 mb-4">Images</h2> <!></div> <div><h2 class="text-lg font-medium text-gray-900 mb-4">Audio</h2> <!></div></div>'),Ve=x('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No images uploaded</h3> <p class="mt-1 text-sm text-gray-500">Upload some images to preview the slideshow.</p></div>'),ze=x('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex items-center"><a href="/" class="text-gray-500 hover:text-gray-700 mr-4" aria-label="Back to home"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a> <div class="flex items-center gap-3"><h1 class="text-2xl font-bold text-gray-900"> </h1> <span> </span></div></div> <!></div></div></header> <div class="bg-white border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><nav class="-mb-px flex space-x-8" aria-label="Tabs"><button>Images & Audio</button> <button>Preview Slideshow</button></nav></div></div> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></main></div>');function Ke(I,g){xe(g,!0);const[Z,ee]=ke(),te=()=>ye(je,"$page",Z);let t=U(null),z=U(!0),b=U("images");const m=te().params.id;async function F(){try{const a=await fetch(`http://localhost:3000/api/projects/${m}`);if(a.ok){if(j(t,await a.json(),!0),e(t).type!=="FWI-emotional"){V(`/project/${m}`);return}}else console.error("Project not found:",m),alert("Project not found. Redirecting to home page."),V("/")}catch(a){console.error("Failed to load project:",a),alert("Failed to load project. Redirecting to home page."),V("/")}finally{j(z,!1)}}function ae(a){switch(a){case"FWI-main":return"FWI Main";case"FWI-emotional":return"FWI Emotional";case"Scavenger-Hunt":return"Scavenger Hunt";default:return"FWI Main"}}function re(a){switch(a){case"FWI-main":return"bg-blue-100 text-blue-800";case"FWI-emotional":return"bg-purple-100 text-purple-800";case"Scavenger-Hunt":return"bg-green-100 text-green-800";default:return"bg-blue-100 text-blue-800"}}fe(()=>{F();const a=new WebSocket("ws://localhost:3000");return a.onmessage=u=>{const S=JSON.parse(u.data);S.projectId===m&&j(t,{...e(t),...S},!0)},()=>{a.close()}});function L(){F()}function oe(){F()}async function se(a="emotional"){try{(await fetch(`http://localhost:3000/api/process/${m}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:a})})).ok&&(e(t).status="processing")}catch(u){console.error("Failed to start processing:",u)}}var N=Q(),ie=X(N);{var ne=a=>{var u=We();c(a,u)},le=(a,u)=>{{var S=P=>{var M=ze(),W=o(M),O=o(W),E=o(O),A=o(E),G=p(o(A),2),$=o(G),de=o($,!0);s($);var C=p($,2),ce=o(C,!0);s(C),s(G),s(A);var pe=p(A,2);{var ve=n=>{var i=Te(),h=o(i);{var f=l=>{Ie(l,{get project(){return e(t)}})},_=(l,w)=>{{var y=r=>{var k=Ae();Y(()=>we(k,"href",`http://localhost:3000/api/process/${m??""}/download`)),c(r,k)},d=r=>{var k=Ce();k.__click=[$e,se],c(r,k)};v(l,r=>{e(t).video?r(y):r(d,!1)},w)}};v(h,l=>{e(t).status==="processing"?l(f):l(_,!1)})}s(i),c(n,i)};v(pe,n=>{var i;((i=e(t).images)==null?void 0:i.length)>0&&e(t).audio&&n(ve)})}s(E),s(O),s(W);var T=p(W,2),J=o(T),R=o(J),B=o(R);B.__click=[Be,b];var D=p(B,2);D.__click=[Ue,b],s(R),s(J),s(T);var q=p(T,2),me=o(q);{var ue=n=>{var i=He(),h=o(i),f=p(o(h),2);{var _=r=>{Fe(r,{get projectId(){return m},$$events:{uploaded:L}})},l=r=>{Se(r,{get project(){return e(t)},$$events:{updated:F,"add-more":L}})};v(f,r=>{!e(t).images||e(t).images.length===0?r(_):r(l,!1)})}s(h);var w=p(h,2),y=p(o(w),2);const d=_e(()=>!!e(t).audio);Me(y,{get projectId(){return m},get hasAudio(){return e(d)},get audioFile(){return e(t).audio},$$events:{uploaded:oe}}),s(w),s(i),c(n,i)},ge=(n,i)=>{{var h=f=>{var _=Q(),l=X(_);{var w=d=>{Pe(d,{get project(){return e(t)}})},y=d=>{var r=Ve();c(d,r)};v(l,d=>{var r;((r=e(t).images)==null?void 0:r.length)>0?d(w):d(y,!1)})}c(f,_)};v(n,f=>{e(b)==="slideshow"&&f(h)},i)}};v(me,n=>{e(b)==="images"?n(ue):n(ge,!1)})}s(q),s(M),Y((n,i)=>{K(de,e(t).name),H(C,1,`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n??""}`),K(ce,i),H(B,1,`py-4 px-1 border-b-2 font-medium text-sm ${e(b)==="images"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),H(D,1,`py-4 px-1 border-b-2 font-medium text-sm ${e(b)==="slideshow"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`)},[()=>re(e(t).type),()=>ae(e(t).type)]),c(P,M)};v(a,P=>{e(t)&&P(S)},u)}};v(ie,a=>{e(z)?a(ne):a(le,!1)})}c(I,N),be(),ee()}he(["click"]);export{Ke as component};
