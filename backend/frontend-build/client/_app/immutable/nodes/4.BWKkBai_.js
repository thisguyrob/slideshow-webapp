import"../chunks/CWj6FrbW.js";import{d as xe,o as be,s as Q}from"../chunks/BVW34SQx.js";import{p as _e,c as X,f as Y,a as v,b as we,s as I,g as e,d as B,e as x,h as o,i as p,r as s,t as Z,u as ye}from"../chunks/CNfditUa.js";import{i as m}from"../chunks/GC4dxQQb.js";import{g as H,s as V,a as ke}from"../chunks/BEFEBz6G.js";import{s as je,a as Ie}from"../chunks/0rDqRz2G.js";import{p as Fe,P as Se,S as $e}from"../chunks/Cty7KhZ4.js";import{g as z}from"../chunks/D7x77NIs.js";import{A as Pe,I as Me,a as We}from"../chunks/CN7Dxjc9.js";var Ae=x('<div class="min-h-screen bg-gray-50 flex justify-center items-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div></div>'),Ce=x('<a class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"><svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Download Video</a>'),Te=(F,u)=>u("normal"),Ue=x('<button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700"><svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Generate Slideshow</button>'),Be=x('<div class="flex items-center space-x-3"><!></div>'),He=(F,u)=>I(u,"images"),Ve=(F,u)=>I(u,"slideshow"),ze=x('<div class="space-y-8"><div><h2 class="text-lg font-medium text-gray-900 mb-4">Images</h2> <!></div> <div><h2 class="text-lg font-medium text-gray-900 mb-4">Audio</h2> <!></div></div>'),Le=x('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No images uploaded</h3> <p class="mt-1 text-sm text-gray-500">Upload some images to preview the slideshow.</p></div>'),Ne=x('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex items-center"><a href="/" class="text-gray-500 hover:text-gray-700 mr-4" aria-label="Back to home"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a> <div class="flex items-center gap-3"><h1 class="text-2xl font-bold text-gray-900"> </h1> <span> </span></div></div> <!></div></div></header> <div class="bg-white border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><nav class="-mb-px flex space-x-8" aria-label="Tabs"><button>Images & Audio</button> <button>Preview Slideshow</button></nav></div></div> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></main></div>');function Xe(F,u){_e(u,!0);const[ee,te]=Ie(),ae=()=>je(Fe,"$page",ee);let t=B(null),L=B(!0),b=B("images");const g=ae().params.id;async function S(){try{const a=await fetch(`${H()}/api/projects/${g}`);if(a.ok){if(I(t,await a.json(),!0),e(t).type!=="FWI-main"){z(`/project/${g}`);return}}else console.error("Project not found:",g),alert("Project not found. Redirecting to home page."),z("/")}catch(a){console.error("Failed to load project:",a),alert("Failed to load project. Redirecting to home page."),z("/")}finally{I(L,!1)}}function re(a){switch(a){case"FWI-main":return"FWI Main";case"FWI-emotional":return"FWI Emotional";case"Scavenger-Hunt":return"Scavenger Hunt";default:return"FWI Main"}}function oe(a){switch(a){case"FWI-main":return"bg-blue-100 text-blue-800";case"FWI-emotional":return"bg-purple-100 text-purple-800";case"Scavenger-Hunt":return"bg-green-100 text-green-800";default:return"bg-blue-100 text-blue-800"}}be(()=>{S();const a=window.location.hostname,c=new WebSocket(`ws://${a}:3000`);return c.onmessage=$=>{const _=JSON.parse($.data);_.projectId===g&&I(t,{...e(t),..._},!0)},()=>{c.close()}});function N(){S()}function se(){S()}async function ie(a="normal"){try{(await fetch(`${H()}/api/process/${g}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:a})})).ok&&(e(t).status="processing")}catch(c){console.error("Failed to start processing:",c)}}var O=X(),ne=Y(O);{var de=a=>{var c=Ae();v(a,c)},le=(a,c)=>{{var $=_=>{var P=Ne(),M=o(P),G=o(M),J=o(G),W=o(J),R=p(o(W),2),A=o(R),ce=o(A,!0);s(A);var C=p(A,2),ve=o(C,!0);s(C),s(R),s(W);var pe=p(W,2);{var me=n=>{var i=Be(),h=o(i);{var f=d=>{Se(d,{get project(){return e(t)}})},w=(d,y)=>{{var k=r=>{var j=Ce();Z(fe=>ke(j,"href",`${fe??""}/api/process/${g??""}/download`),[H]),v(r,j)},l=r=>{var j=Ue();j.__click=[Te,ie],v(r,j)};m(d,r=>{e(t).video?r(k):r(l,!1)},y)}};m(h,d=>{e(t).status==="processing"?d(f):d(w,!1)})}s(i),v(n,i)};m(pe,n=>{var i;((i=e(t).images)==null?void 0:i.length)>0&&e(t).audio&&n(me)})}s(J),s(G),s(M);var T=p(M,2),D=o(T),E=o(D),U=o(E);U.__click=[He,b];var q=p(U,2);q.__click=[Ve,b],s(E),s(D),s(T);var K=p(T,2),ge=o(K);{var ue=n=>{var i=ze(),h=o(i),f=p(o(h),2);{var w=r=>{Me(r,{get projectId(){return g},$$events:{uploaded:N}})},d=r=>{We(r,{get project(){return e(t)},$$events:{updated:S,"add-more":N}})};m(f,r=>{!e(t).images||e(t).images.length===0?r(w):r(d,!1)})}s(h);var y=p(h,2),k=p(o(y),2);const l=ye(()=>!!e(t).audio);Pe(k,{get projectId(){return g},get hasAudio(){return e(l)},get audioFile(){return e(t).audio},$$events:{uploaded:se}}),s(y),s(i),v(n,i)},he=(n,i)=>{{var h=f=>{var w=X(),d=Y(w);{var y=l=>{$e(l,{get project(){return e(t)}})},k=l=>{var r=Le();v(l,r)};m(d,l=>{var r;((r=e(t).images)==null?void 0:r.length)>0?l(y):l(k,!1)})}v(f,w)};m(n,f=>{e(b)==="slideshow"&&f(h)},i)}};m(ge,n=>{e(b)==="images"?n(ue):n(he,!1)})}s(K),s(P),Z((n,i)=>{Q(ce,e(t).name),V(C,1,`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n??""}`),Q(ve,i),V(U,1,`py-4 px-1 border-b-2 font-medium text-sm ${e(b)==="images"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),V(q,1,`py-4 px-1 border-b-2 font-medium text-sm ${e(b)==="slideshow"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`)},[()=>oe(e(t).type),()=>re(e(t).type)]),v(_,P)};m(a,_=>{e(t)&&_($)},c)}};m(ne,a=>{e(L)?a(de):a(le,!1)})}v(F,O),we(),te()}xe(["click"]);export{Xe as component};
